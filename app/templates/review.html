{% extends "layout.html" %}

{% block content %}
	<!-- Blog entry -->
  <div class="w3-container w3-white w3-margin w3-padding-large">
    <div class="w3-center">
      <h3>{{ review.title }}</h3>
      <h5 class="w3-opacity">Posted By <a href="{{ url_for('users.user_reviews', username=review.author.username) }}">{{ review.author.username }}</a> on {{ review.date_posted.strftime('%Y-%m-%d') }}</h5>
    </div>

    <div class="w3-justify">
      <img src="{{ url_for('static', filename = 'homepagePics/blackgirls.jpg') }}" style="width:100%" class="w3-padding-16">
      <p><strong>More Hats!</strong> I am crazy about hats these days. Some text about this blog entry. Fashion fashion and mauris neque quam, fermentum ut nisl vitae, convallis maximus nisl. Sed mattis nunc id lorem euismod placerat. Vivamus porttitor
        magna enim, ac accumsan tortor cursus at. Phasellus sed ultricies mi non congue ullam corper. Praesent tincidunt sedtellus ut rutrum. Sed vitae justo condimentum, porta lectus vitae, ultricies congue gravida diam non fringilla.</p>
      <p>Sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
      <p class="w3-left"><button class="w3-button w3-white w3-border" onclick="likeFunction(this)"><b><i class="fa fa-thumbs-up"></i> Like</b></button></p>
      {% if review.author == current_user %}
        <div>
          <a class="w3-left w3-button w3-white w3-border" href="{{ url_for('reviews.update_review', review_id=review.id) }}">Update</a>
          <button class="w3-left w3-button w3-red w3-border" data-toggle="modal" data-target="#deleteModal">Delete</button><br>
        </div>
      {% endif %}
      <p class="w3-right"><b>Comments: </b>{{ comments|length }}</p>
      {% if comments|length > 0 %}
        {% for comment in comments %}
        <div class="w3-row">
          <hr>
          <div class="w3-col l2 m3">
            <img src="/w3images/avatar_smoke.jpg" style="width:90px;">
          </div>
          <div class="w3-col l10 m9">
            <h4 class="mr-2" href="{{ url_for('users.user_reviews', username = comment.commenter) }}">{{ comment.commenter }} <span class="w3-opacity w3-medium">{{ comment.date_posted.strftime('%Y-%m-%d') }}</span></h4>
            <p>{{ comment.body }}</p>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <div class="w3-row">
          <p class="text-muted">No comments yet for this post</p>
        </div>
      {% endif %}
      <form action="" class="form-group col-xs-3" method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
          {{ form.body.label(class="form-control-label") }}
          {% if form.body.errors %}
            {{ form.body(class="form-control form-control-lg is-invalid") }}
            <div class="invalid-feedback">
              {% for error in form.body.errors %}
                <span>{{ error }}</span>
              {% endfor %}
            </div>
          {% else %}
            {{ form.body(class="form-control form-control-lg") }}
          {% endif %}
        </div>
        <div class="form-group">
          {{ form.submit(class="btn btn-dark btn-sm") }}
        </div>
      </form>
    </div>
  </div>
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete Review?</h5>
          <button class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">Are you sure you want to delete this post? This change will be final.</div>
        <div class="modal-footer">
          <button class="btn btn-secondary btn-sm" data-dismiss="modal">Close</button>
          <form action="{{ url_for('reviews.delete_review', review_id = review.id) }}" method="POST">
            <input class="btn btn-danger btn-sm" type="submit" value="Delete">
      	  </form>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
